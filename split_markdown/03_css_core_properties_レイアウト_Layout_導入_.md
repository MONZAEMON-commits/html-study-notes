# 03_css_core_properties(レイアウト(Layout)導入)
CSSの「レイアウト」は、ページ内の要素をどのように並べるか・配置するかを制御するための考え方です。<br>
これまで学んできた「見た目の装飾」や「余白の調整」だけでは、<br>
要素を思い通りに動かすことはできません。<br>
**レイアウトを学ぶ目的**
| 目的                               | 内容                                             |
| :--------------------------------- | :----------------------------------------------- |
| **ページ構成を作る**               | ヘッダー、メイン、サイドバー、フッターなどを配置 |
| **要素の並びを制御する**           | 横並び・縦並びを自在に変更                       |
| **センタリングや重ね合わせを行う** | 中央寄せ、固定表示、重ね表示など                 |

**レイアウトを支える主要プロパティ**
| テーマ                 | 主なプロパティ                       | 内容                                             |
| :--------------------- | :----------------------------------- | :----------------------------------------------- |
| **要素の表示形式**     | `display`                            | ブロック要素・インライン要素・Flexなどの切り替え |
| **位置指定**           | `position`, `top`, `left`, `z-index` | 絶対・相対・固定などの位置制御                   |
| **横並びレイアウト**   | `flexbox`                            | 横・縦方向の配置・中央寄せなどに強い             |
| **グリッドレイアウト** | `grid`                               | 複雑な2次元レイアウトを簡単に構築                |

**学習の進め方(この章の流れ)**
| 順番  | 学ぶ内容     | 目的                                                   |
| :---: | :----------- | :----------------------------------------------------- |
|   1️⃣   | **display**  | 要素の基本的な表示形式を理解する(ブロック・インライン) |
|   2️⃣   | **position** | 要素を特定位置に固定・移動させる方法を学ぶ             |
|   3️⃣   | **flexbox**  | 要素を横・縦に整列するモダンなレイアウト手法           |
|   4️⃣   | **grid**     | 行と列を使った本格的なレイアウト構築                   |

## display(表示形式)について
構文
```css
display: 値;
```
説明<br>
display は、HTML要素がどのように配置・表示されるかを決めるプロパティです。<br>
つまり、「要素が1行に並ぶのか(横並び)」「改行されるのか(縦並び)」を制御します。<br>
CSSレイアウトを学ぶうえでの最も基本的な設定であり、<br>
後で学ぶ flex や grid もすべてこの display の発展形です。<br>

**主な値と動作**<br>
| 値             | 説明                                               | 主な用途                         |
| :------------- | :------------------------------------------------- | :------------------------------- |
| `block`        | ブロック要素。幅は親いっぱい、改行される           | `<div>`, `<p>`, `<section>` など |
| `inline`       | インライン要素。横に並び、幅は内容に応じる         | `<span>`, `<a>`, `<strong>` など |
| `inline-block` | インラインのように横並びだが、幅と高さを指定できる | ボタンや小さなボックス配置に便利 |
| `none`         | 要素を非表示にし、レイアウト上からも除外           | メニュー切り替えなど             |
| `flex`         | Flexboxレイアウトを有効化(横・縦方向に整列可能)    | 近代的なレイアウトの主力         |
| `grid`         | Gridレイアウトを有効化(行×列で配置)                | 複雑な2D構造のページに使用       |

例文
```css
/* ブロック要素として表示(デフォルト) */
div {
  display: block;
}

/* インライン要素として表示 */
span {
  display: inline;
}

/* 横に並ぶがサイズ指定も可能 */
button {
  display: inline-block;
  width: 120px;
  height: 40px;
}

/* Flexboxを有効化(親要素に指定) */
.container {
  display: flex;
  justify-content: center;
  align-items: center;
}
```
**注意点**
- display は要素の基本的なレイアウト挙動を根本的に変える。
- ブロック要素を inline にしたり、インライン要素を block に変えることで柔軟な配置が可能。
- display: none; は完全に非表示になり、領域も消える。<br>
`(visibility: hidden; は見えなくなるだけで、領域は残る)`
- flex や grid を使う場合は、親要素に指定することで、子要素の並びを制御できる。
## display(表示形式)まとめ
| 項目   | 内容                                                          |
| :----- | :------------------------------------------------------------ |
| 目的   | 要素の表示・並び方を決める                                    |
| 書式   | `display: 値;`                                                |
| 代表値 | `block`, `inline`, `inline-block`, `none`, `flex`, `grid`     |
| 注意点 | 要素のレイアウト挙動を根本的に変える。`flex`/`grid`は親に指定 |

## position(位置指定)について
構文
```css
position: static | relative | absolute | fixed | sticky;
```
位置指定にはこれら5種類の値を使います。<br>
さらに、要素を動かすために下記の補助プロパティを組み合わせます：<br>
```css
top: 値;
right: 値;
bottom: 値;
left: 値;
z-index: 値;
```
説明<br>
position は、要素をページ上のどこに配置するかを制御するプロパティです。<br>
標準の位置(通常の流れ)を基準に、「ずらす・固定する・重ねる」などの配置を行います。<br>

**positionの主な種類と特徴**
| 値         | 説明                                         | 基準位置                        | 主な用途                           |
| :--------- | :------------------------------------------- | :------------------------------ | :--------------------------------- |
| `static`   | デフォルト。通常の文書の流れで配置           | ―                               | 通常のテキストや段落(位置指定なし) |
| `relative` | 通常位置から相対的に移動                     | 自分の元の位置                  | ラベルの微調整など                 |
| `absolute` | 親要素を基準に絶対配置                       | 最も近い position指定の祖先要素 | アイコンの重ね配置など             |
| `fixed`    | ブラウザ画面に固定(スクロールしても動かない) | ビューポート(画面全体)          | ヘッダーやサイドメニュー固定       |
| `sticky`   | 通常は流れに従うが、特定位置で固定される     | スクロール位置                  | ナビゲーションバーなど             |

**例 static(デフォルト)**
```css
div {
  position: static;
}
```
説明<br>
- デフォルトの配置方法。
- top や left などの指定は無視されます。<br>

**例 relative(相対配置)**
```css
.label {
  position: relative;
  top: 10px;
  left: 20px;
}
```
説明<br>
- 元の位置を基準に、10px下・20px右に移動。
- 要素の占有スペース(元の位置)はそのまま残る。<br>
`→ 微調整に便利。`

**例 absolute(絶対配置)**
```css
.icon {
  position: absolute;
  top: 10px;
  right: 10px;
}
```
説明<br>
- 親要素の中で絶対位置を指定できる。
- 親要素に position: relative; があると、その中を基準に配置。
- 他の要素のレイアウトには影響を与えない。<br>

**absolute の基準（重要）**<br>
absolute の基準（どこを起点に配置するか）は、次のルールで決まります：
<ol>
<li>最も近い position: relative / absolute / fixed / sticky を持つ親要素が基準になる</li>
<li>もし親がどれも position を持たなければ、ページ全体（初期包含ブロック）が基準になる</li>
<li>親に transform（例：transform: translate()）があると、その要素も基準になる（例外）</li>
</ol>

`※ このルールを知らないと「なぜここに配置されるの？」という混乱が起きる。`


## relative（親）＋ absolute（子）で行う基本レイアウト
要素を重ねたい・角に固定したいときに最も使われる定番パターンです。<br>
absolute は 「基準となる親」 によって動作が変わるため、<br>
親に position: relative; を指定して、“その中” で絶対配置を行います。<br>
**役割の整理**
| 役割                        | 説明                                                |
| --------------------------- | --------------------------------------------------- |
| `position: relative;`（親） | 子 absolute の **基準点（0,0）を作る**              |
| `position: absolute;`（子） | 親の中で **自由に配置**（右上・左下・中央固定など） |

コード例（UI で一番使うパターン）
カードの右上にアイコンを配置 <br>
[カードアイコンサンプルを見る](https://monzaemon-commits.github.io/html-study-notes/split_markdown/sample/card_icon/index.html)

```html
<div class="card">
  <img src="image.jpg" alt="画像">
  <span class="badge">New</span>
</div>
```
```css
.card {
  position: relative; /* 子absoluteの基準 */
  width: 300px;
  height: 200px;
  background-color: #eee;
}

.badge {
  position: absolute; /* 親.cardを基準に配置 */
  top: 10px;
  right: 10px;
  background: red;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
}
```
**挙動の詳細**
| 項目                         | 解説                                                   |
| ---------------------------- | ------------------------------------------------------ |
| **absolute の基準点**        | 親に `relative` があると **親の左上が基準（0,0）**     |
| **浮く（流れから外れる）**   | 他の要素を押しのけず、上に重なるように配置される       |
| **親に吸着する**             | 親を動かすと子も追従する                               |
| **親の高さに影響しない**     | 子がはみ出しても親は伸びない（典型的な absolute の罠） |
| **top/right などの指定方法** | 通常は **上下＋左右のセット**（例：top + right）が基準 |

**絶対忘れちゃいけないルール**<br>
`❗ absolute を使う場合は「親に relative をつける」が基本ルール`<br>
→ これを忘れると 勝手に body を基準に飛んでいく（一番ありがちなバグ）。<br>
`❗ 子absolute は親の高さに影響しない`<br>
→ 子画像が大きい場合、レイアウトが崩れて見えることがある。<br>
`❗z-index が必要になることがある`<br>
→ 他の要素に重なって消えてしまう場合、z-index: 10; を追加する。<br>

**例 fixed(画面固定)**
```css
.header {
  position: fixed;
  top: 0;
  width: 100%;
}
```
説明<br>
- 画面上部に固定され、スクロールしても動かない。<br>
- Webサイトの「固定ヘッダー」などに使用。<br>

fixed（画面固定）の挙動の詳細
| 項目                           | 解説                                                                   |
| ------------------------------ | ---------------------------------------------------------------------- |
| **基準位置**                   | ビューポート（画面そのもの）。親要素の position は一切関係ない。       |
| **スクロール時の動作**         | スクロールしても位置が変わらない（常に画面の同じ位置に表示され続ける） |
| **通常のレイアウトから外れる** | 他要素を押しのけず「浮いた状態」になる                                 |
| **重なり順**                   | 他要素と重なることが多いため `z-index` を指定することがよくある        |

実務でよくある用途
- 固定ヘッダー（スマホアプリ風のナビ）
- 固定サイドメニュー
- ページトップに戻るボタン

**fixed の注意点(absolute と区別して整理)**
- モバイルでは固定ヘッダーが画面を圧迫しがち
- 他要素より前に出るため z-index の調整が必須
- 表示位置は常にビューポート基準（親の relative は関係なし）

**例 sticky(スクロール追従)**
```css
nav {
  position: sticky;
  top: 0;
  background-color: white;
}
```
説明<br>
- 通常は static のように動くが、スクロールで top: 0; に達すると固定される。
- いわゆる「スクロール固定ナビバー」の挙動。<br>
sticky（スクロール追従）の挙動の詳細

| 項目                         | 解説                                                               |
| ---------------------------- | ------------------------------------------------------------------ |
| **普段の状態**               | 通常は `static` と同じように文書の流れの中に存在                   |
| **固定されるタイミング**     | `top` などで指定した位置にスクロールが到達した瞬間に “固定” へ変化 |
| **基準位置**                 | 親要素の領域内でのみ固定される（親を超えると sticky は解除）       |
| **親要素の overflow に注意** | 親に `overflow: hidden;` があると sticky が機能しない              |
実務でよくある用途
- スクロール中に追従するナビバー
- テーブルの見出しを固定する
- 長い記事の目次をスクロール固定

**sticky の注意点(absolute と区別して整理)**<br>
- 親要素の領域を超えると sticky は解除される
- 親の height が小さすぎると sticky が発動しない
- 親に overflow: hidden があると sticky は無効になる
- absolute の基準は「最も近い position が指定された親要素」。
`→ 親に何も指定がなければ body(ページ全体) が基準になる。`
- relative はスペースを残すが、absolute は残さない。
- fixed は画面全体を基準に動かないため、スマホでは注意(ヘッダーがかぶる場合あり)。
- z-index は 重なり順 を指定する。値が大きいほど前面に表示。

